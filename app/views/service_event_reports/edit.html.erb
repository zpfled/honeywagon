<% if turbo_frame_request? %>
  <turbo-frame id="service_event_modal">
    <div class="fixed inset-0 z-50 flex items-center justify-center bg-gray-900/60 px-4 py-6" data-controller="modal" data-action="keyup@window->modal#maybeClose">
      <div class="absolute inset-0" data-action="click->modal#close"></div>
      <div class="relative z-10 w-full max-w-xl rounded-2xl bg-white p-6 shadow-xl">
        <div class="flex items-start justify-between">
          <div>
            <h2 class="text-xl font-semibold text-gray-900">Edit Service Report</h2>
            <p class="text-sm text-gray-600 mt-1">
              <strong>Customer:</strong> <%= @prefill[:customer_name] %><br>
              <strong>Address:</strong> <%= @prefill[:customer_address] %>
            </p>
          </div>
          <button class="text-gray-400 hover:text-gray-700" data-action="click->modal#close">
            <span class="sr-only">Close</span>
            âœ•
          </button>
        </div>
        <div class="mt-4">
          <%= render 'form', modal: true, redirect_path: params[:redirect_path], form_url: service_event_report_path(@report), form_method: :patch %>
        </div>
      </div>
    </div>
  </turbo-frame>
<% else %>
  <div class="mx-auto max-w-2xl px-4 py-8">
    <div class="mb-6">
      <h1 class="text-2xl font-semibold text-gray-900">Edit Service Report</h1>
      <p class="mt-1 text-sm text-gray-600">
        <strong>Customer:</strong> <%= @prefill[:customer_name] %><br>
        <strong>Address:</strong> <%= @prefill[:customer_address] %>
      </p>
    </div>

    <div class="rounded-2xl bg-white p-6 shadow-sm ring-1 ring-gray-200">
      <%= render 'form', modal: false, redirect_path: params[:redirect_path], form_url: service_event_report_path(@report), form_method: :patch %>
    </div>
  </div>
<% end %>
